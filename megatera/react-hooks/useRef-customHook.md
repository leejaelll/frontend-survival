# useRef & Custom Hook

### í•™ìŠµ í‚¤ì›Œë“œ

* useRef
* Hookì˜ ê·œì¹™



### useRef

* [beta ë¬¸ì„œì˜ useRef](https://beta.reactjs.org/reference/react/useRef)
* [ê³µì‹ ë¬¸ì„œì˜ useRef](https://ko.reactjs.org/docs/hooks-reference.html#useref)

ì»´í¬ë„ŒíŠ¸ì˜ ìƒì• ì£¼ê¸° ì „ì²´ì— ê±¸ì³ì„œ ìœ ì§€ë˜ëŠ” ê°ì²´. ì¦‰, ì»´í¬ë„ŒíŠ¸ê°€ ì—†ì–´ì§ˆ ë•Œê¹Œì§€ ë™ì¼í•œ ê°ì²´ê°€ ìœ ì§€ëœë‹¤.

ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œë¥¼ ë³´ê³  useRefì˜ ê°œë…ê³¼ ì‚¬ìš©ë°©ë²•ì— ëŒ€í•´ì„œ ì •ë¦¬í–ˆë‹¤.ğŸ‘‰ğŸ» [useRefì˜ ê°œë…ê³¼ ì‚¬ìš©ë°©ë²• - LEE\_PLAY](https://leejaelll.github.io/2023/230521-archive/)

ì–´ëŠ ìƒí™©ì—ì„œ useRefë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ê³µë¶€í•  ìˆ˜ ìˆì—ˆë‹¤. ì¤‘ìš”í•œ ê±´ ë³€ê²½ëœ ê°’ì„ í™”ë©´ì— ë³´ì—¬ì¤˜ì•¼í•˜ëŠ”ê°€? ë³´ì—¬ì£¼ì§€ ì•Šì•„ë„ ë˜ëŠ”ê°€?ì— ì°¨ì´ë¼ê³  ìƒê°í•œë‹¤.

\


ğŸ¦– 00:38 - ì»´í¬ë„ŒíŠ¸ ìƒì• ì£¼ê¸°ë€?

ì»´í¬ë„ŒíŠ¸ê°€ ë§Œë“¤ì–´ì¡Œë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ë™ì•ˆì˜ ì£¼ê¸°ë¥¼ ì˜ë¯¸í•¨.

![](images/2023-03-29-16-20-49.png)

ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì¡Œë‹¤ëŠ” ê²ƒì€ DOM ìš”ì†Œì—ì„œ ì‚¬ë¼ì§€ëŠ” ê²ƒì„ ì˜ë¯¸. ë“¤ì–´ê°ˆ ë• Mount ë¹ ì§ˆ ë• Unmountë¼ê³  ë¶€ë¦„.

**componentDidMount**

ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„±ë  ì‹œì ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ, ì»´í¬ë„ŒíŠ¸ì˜ ì²« ë²ˆì§¸ ë Œë”ë§ì„ ë§ˆì¹˜ê³  ë‚˜ë©´ í˜¸ì¶œëœë‹¤. _ì´ ì‹œì ì—ëŠ” ë³´í†µ DOMì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—°ë™í•´ì•¼í•˜ê±°ë‚˜, Web APIë¥¼ ì‚¬ìš©í•´ì•¼í•  ë•Œ ì‚¬ìš©ëœë‹¤._

**componentDidUpdate**

íŠ¹ì • propì´ë‚˜ stateê°€ ì—…ë°ì´íŠ¸ë  ë•Œ ìƒˆë¡­ê²Œ UIë¥¼ ì—…ë°ì´íŠ¸ë¥¼ í•´ì•¼í•œë‹¤. ì´ ë•Œ ë¦¬ë Œë”ë§ì„ ë§ˆì¹˜ê³  ì›í•˜ëŠ” ë³€í™”ê°€ ëª¨ë‘ ë°˜ì˜ëœ ì´í›„ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ

**componentWillUnmount**

ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì—ì„œ ì‚¬ë¼ì§€ê¸° ë°”ë¡œ ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ

\


useRefëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„±ë˜ì—ˆë‹¤ê°€ ì‚¬ë¼ì§€ëŠ” ê·¸ ë™ì•ˆì—ì„œ ê³„ì†í•´ì„œ ìœ ì§€ë˜ëŠ” ê°ì²´!

{% hint style="info" %}
ê°ì²´ ìì²´ê°€ ê°’ì€ ì•„ë‹ˆê³ , ê°’ì„ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ê°ì²´. ì¦‰, ì–¸ì œë“ ì§€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
{% endhint %}

ìƒíƒœì™€ëŠ” ê´€ê³„ì—†ì´ ê°’ì„ ê³„ì†í•´ì„œ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´?

```jsx
const ref = {
  value: 1,
};
```

refì— ì¬í• ë‹¹ì„ í•  ìˆœ ì—†ì§€ë§Œ ref.valueë¥¼ ë°”ê¿€ ìˆ˜ëŠ” ìˆë‹¤.

ê°ìì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°’ì„ ê°€ì§€ê³  ì‹¶ë‹¤ë©´ ê·¸ë•Œ useRefë¥¼ ì‚¬ìš©í•œë‹¤.

```jsx
const ref = useRef(1);
```

refëŠ” currentë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìˆìŒ

```jsx
ref.current += 1;
```

ì´ëŸ¬ë©´ useStateì™€ ë¬´ìŠ¨ ì°¨ì´ê°€ ìˆì§€?\
: ìƒíƒœ(state)ê°€ ë³€ê²½ë˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì™€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ë§Œ, ë ˆí¼ëŸ°ìŠ¤ ê°ì²´ì˜ í˜„ì¬ ê°’(current)ì´ ë°”ë€Œë”ë¼ë„ ë Œë”ë§ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

```jsx
export default function App() {
  const counter = useRef(1)

  const handleClick = () => {
    counter.current += 1
  }

  return(
    <p>{counter}</p>
    <button type="button" onClick={handleClick}>Toggle</button>
  )

}
```

Toggle ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ ìˆ«ìê°€ ì¦ê°€í•˜ëŠ” ì½”ë“œ

* í™”ë©´ì—ì„œëŠ” ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ ë³€í™”ê°€ ì—†ë‹¤.
* ë‹¤ë¥¸ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë Œë”ë§ì„ ë‹¤ì‹œí•˜ë©´ ëˆ„ë¥¸ ìˆ˜ë§Œí¼ ìˆ«ìê°€ ì¦ê°€ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
* ì¦‰, í™”ë©´ ë Œë”ë§ì„ ë‹¤ì‹œ í•  ë•Œ ë°˜ì˜í•œë‹¤.

\


#### ì£¼ìš” ìš©ë„

1. ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œê¹Œì§€ ë™ì¼í•œ ê°’ì„ ì¨ì•¼ í•˜ëŠ” ê²½ìš°. â‡’ input ë“±ì˜ ID ê´€ë¦¬.
2. (íŠ¹íˆ useEffect ë“±ê³¼ í•¨ê»˜ ì“°ë©´ì„œ ë§Œë‚˜ê²Œ ë˜ëŠ”) ë¹„ë™ê¸° ìƒí™©ì—ì„œ í˜„ì¬ ê°’ì„ ì œëŒ€ë¡œ ì“°ê³  ì‹¶ì€ ê²½ìš°.
   * Closure â†’ ë³€ìˆ˜ë¥¼ capture, bindë¥¼ ê¹œë¹¡í•˜ëŠ” ë¬¸ì œê°€ ì¢…ì¢… ì¼ì–´ë‚¨.

\


### Custom Hook

* [Reusing Logic with Custom Hooks](https://beta.reactjs.org/learn/reusing-logic-with-custom-hooks)
* [ìì‹ ë§Œì˜ Hook ë§Œë“¤ê¸°](https://ko.reactjs.org/docs/hooks-custom.html)

ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì œì¼ ì‰¬ìš´ ë°©ë²•.

í‰ë²”í•˜ê²Œ Extract Functionì„ ìˆ˜í–‰í•˜ë©´ ëœë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” PascalCaseë¡œ ì´ë¦„ì„ ë¶™ì¸ë‹¤ë©´, Hookì€ â€œuseâ€ë¡œ ì‹œì‘í•˜ëŠ” camelCaseë¡œ ì´ë¦„ì„ ë¶™ì´ë©´ ëœë‹¤.

```jsx
function useFetchProducts() {
  const [products, setProducts] = useState<Product[]>([]);

  useEffect(() => {
    const fetchProducts = async () => {
      const url = 'http://localhost:3000/products';
      const response = await fetch(url);
      const data = await response.json();
      setProducts(data.products);
    };

    fetchProducts();
  }, []);

  return products;
}
```

useFetchProductsë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

```jsx
export default function App() {
  const products = useFetchProducts();

  return <FilterableTable products={products} />;
}
```

ì»´í¬ë„ŒíŠ¸ ì½”ë“œë„ ëª…í™•í•´ì§€ê³ , setProductsê°€ ì‹¤ìˆ˜ë¡œ ì˜ëª» ì“°ì¼ ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

\


### Hookì˜ ê·œì¹™

* [Hookì˜ ê·œì¹™](https://ko.reactjs.org/docs/hooks-rules.html)

Hook í˜¸ì¶œì€ ê·œì¹™ì´ ìˆì–´ì„œ ë‹¨ìˆœí•˜ê²Œ ì“°ë„ë¡ ë…¸ë ¥í•´ì•¼ í•œë‹¤.

1. Function Component ë°”ë¡œ ì•ˆìª½(í•¨ìˆ˜ì˜ ìµœìƒìœ„)ì—ì„œë§Œ í˜¸ì¶œ.
2. Function Component ë˜ëŠ” Custom Hookì—ì„œë§Œ í˜¸ì¶œ.

ì²˜ìŒì—ëŠ” ì½œë°± í•¨ìˆ˜ë‚˜ ì¡°ê±´ë¬¸ ì•ˆì—ì„œ Hookì„ í˜¸ì¶œí•˜ëŠ” ì‹¤ìˆ˜ë¥¼ ì €ì§€ë¥´ê¸° ì‰½ë‹¤.

```jsx
if (playing) {
  const products = useFetchProducts();
  console.log(products);
}
```
